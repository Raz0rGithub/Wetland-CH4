<!DOCTYPE html>
<html lang="en-US" style="background: #00313c">

<head>
    <title>LBNL | Methane Emissions Visualizer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" sizes="16x16 32x32 48x48" type="image/png" href="/images/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    <script src='https://cdn.jsdelivr.net/npm/mapbox-gl/dist/mapbox-gl.min.js'></script>
    <link href='https://cdn.jsdelivr.net/npm/mapbox-gl/dist/mapbox-gl.css' rel='stylesheet' />
</head>

<body class="layout-basic">
    <header id="trueheader">
    </header>

    <main class=content id="nopadding">
        <header><!-- <h1>Global Wetland CH4 Upscaling Dataset</h1> --></header>

        <div class="radio-inputs">
            <label class="radio">
                <input id="victor-chen/clzrv1q5g00bg01r82uyjes92" type="radio" name="rtoggle" value="mean"
                    checked="checked">
                <div class="name">mean flux 2012-2023</div>
            </label>
            <label class="radio">
                <input id="victor-chen/cm03o3e7q00dt01pw6bp2d6rv" type="radio" name="rtoggle" value="2012">
                <div class="name">mean flux 2012</div>
            </label>
            <label class="radio">
                <input id="victor-chen/cm03o1qyg00f201rbfvijceyb" type="radio" name="rtoggle" value="2023">
                <div class="name">mean flux 2023</div>
            </label>
        </div>

        <img src="./images/colorbar.png" alt="A temporary colorbar" id="colorbar" />
        <div id='map' style='width: 100%; height: 82vh;'></div>

        <section class="cd-h-timeline js-cd-h-timeline margin-bottom-md">
            <div class="cd-h-timeline__container container">
                <div class="cd-h-timeline__dates">
                    <div class="cd-h-timeline__line">
                        <ol>
                            <li><a href="#0" data-date="16/01/2014"
                                    class="cd-h-timeline__date cd-h-timeline__date--selected">2012
                                </a></li>
                            <li><a href="#0" data-date="20/04/2014" class="cd-h-timeline__date">2013</a></li>
                            <li><a href="#0" data-date="20/05/2014" class="cd-h-timeline__date">2014</a></li>
                            <li><a href="#0" data-date="09/07/2014" class="cd-h-timeline__date">2015</a></li>
                            <li><a href="#0" data-date="30/08/2014" class="cd-h-timeline__date">2016</a></li>
                            <li><a href="#0" data-date="15/09/2014" class="cd-h-timeline__date">2017</a></li>
                            <li><a href="#0" data-date="01/11/2014" class="cd-h-timeline__date">2018</a></li>
                            <li><a href="#0" data-date="10/12/2014" class="cd-h-timeline__date">2019</a></li>
                            <li><a href="#0" data-date="19/01/2015" class="cd-h-timeline__date">2020</a></li>
                            <li><a href="#0" data-date="03/03/2015" class="cd-h-timeline__date">2021</a></li>
                            <li><a href="#0" data-date="03/03/2015" class="cd-h-timeline__date">2022</a></li>
                        </ol>

                        <span class="cd-h-timeline__filling-line" aria-hidden="true"></span>
                    </div> <!-- .cd-h-timeline__line -->
                </div> <!-- .cd-h-timeline__dates -->

                <ul>
                    <li><a href="#0"
                            class="text-replace cd-h-timeline__navigation cd-h-timeline__navigation--prev cd-h-timeline__navigation--inactive">Prev</a>
                    </li>
                    <li><a href="#0"
                            class="text-replace cd-h-timeline__navigation cd-h-timeline__navigation--next">Next</a>
                    </li>
                </ul>
            </div> <!-- .cd-h-timeline__container -->

            <div class="cd-h-timeline__events">
                <ol>
                    <li class="cd-h-timeline__event cd-h-timeline__event--selected text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Horizontal Timeline</h2>
                            <em class="cd-h-timeline__event-date">January 16th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">February 28th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">March 20th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">May 20th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">July 9th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">August 30th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">September 15th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">November 1st, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">December 10th, 2014</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">January 29th, 2015</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>

                    <li class="cd-h-timeline__event text-component">
                        <div class="cd-h-timeline__event-content container">
                            <h2 class="cd-h-timeline__event-title">Event title here</h2>
                            <em class="cd-h-timeline__event-date">March 3rd, 2015</em>
                            <p class="cd-h-timeline__event-description color-contrast-medium">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia,
                                fugit
                                recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic
                                repellendus
                                sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis
                                eligendi!
                                Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores
                                porro
                                doloribus.
                            </p>
                        </div>
                    </li>
                </ol>
            </div> <!-- .cd-h-timeline__events -->
        </section>
        <script src="assets/js/util.js"></script> <!-- util functions included in the CodyHouse framework -->
        <script src="assets/js/swipe-content.js"></script>
        <!-- A Vanilla JavaScript plugin to detect touch interactions -->
        <script src="assets/js/main.js"></script>
        <script>document.getElementsByTagName("html")[0].className += " js";</script>
        <link rel="stylesheet" href="assets/css/style.css">


        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoidmljdG9yLWNoZW4iLCJhIjoiY2x6bjRmZ2RkMGplZzJrcHhxaGdkejBiMCJ9.M16aiudcdcItWjvTfoFMhw';
            const map = new mapboxgl.Map({
                container: 'map', // container ID
                style: 'mapbox://styles/victor-chen/clzrv1q5g00bg01r82uyjes92', // style URL
                center: [-90, 20], // starting position [lng, lat]
                zoom: 2 // starting zoom
            });

            map.addControl(new mapboxgl.NavigationControl());
            map.addControl(new mapboxgl.FullscreenControl());
            const inputs = document.getElementsByTagName('input');

            for (const input of inputs) {
                input.onclick = (layer) => {
                    const layerId = layer.target.id;
                    map.setStyle('mapbox://styles/' + layerId);
                };
            }

            // The following values can be changed to control rotation speed:
            // At low zooms, complete a revolution every two minutes.
            const secondsPerRevolution = 90;
            // Above zoom level 5, do not rotate.
            const maxSpinZoom = 4;
            // Rotate at intermediate speeds between zoom levels 3 and 5.
            const slowSpinZoom = 3;

            let userInteracting = false;
            let spinEnabled = true;

            function spinGlobe() {
                const zoom = map.getZoom();
                if (spinEnabled && !userInteracting && zoom < maxSpinZoom) {
                    let distancePerSecond = 360 / secondsPerRevolution;
                    if (zoom > slowSpinZoom) {
                        // Slow spinning at higher zooms
                        const zoomDif =
                            (maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);
                        distancePerSecond *= zoomDif;
                    }
                    const center = map.getCenter();
                    center.lng -= distancePerSecond;
                    // Smoothly animate the map over one second.
                    // When this animation is complete, it calls a 'moveend' event.
                    map.easeTo({ center, duration: 1000, easing: (n) => n });
                }
            }

            // Pause spinning on interaction
            map.on('mousedown', () => {
                userInteracting = true;
            });

            // Restart spinning the globe when interaction is complete
            map.on('mouseup', () => {
                userInteracting = false;
                spinGlobe();
            });

            // These events account for cases where the mouse has moved
            // off the map, so 'mouseup' will not be fired.
            map.on('dragend', () => {
                userInteracting = false;
                spinGlobe();
            });
            map.on('pitchend', () => {
                userInteracting = false;
                spinGlobe();
            });
            map.on('rotateend', () => {
                userInteracting = false;
                spinGlobe();
            });

            // When animation is complete, start spinning if there is no ongoing interaction
            map.on('moveend', () => {
                spinGlobe();
            });

            document.getElementById('btn-spin').addEventListener('click', (e) => {
                spinEnabled = !spinEnabled;
                if (spinEnabled) {
                    spinGlobe();
                    e.target.innerHTML = 'Pause rotation';
                } else {
                    map.stop(); // Immediately end ongoing animation
                    e.target.innerHTML = 'Start rotation';
                }
            });
        </script>

        <!-- <div id="home">
            Counter(uninitialized)
        </div> -->

    </main>

    <footer id="truefooter">
        <!-- <address>
            Written by <a href="VictorChen@lbl.gov">Victor Chen</a>.<br>
        </address> -->
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js" defer></script>
    <script type="text/javascript" src="./script.js" defer></script>
    <script>spinGlobe()</script>

</body>

</html>